$(function(i){i("body").on("click","div.gallery div.wrap div.thumbs a.next",function(t){var d=i("div.gallery div.wrap div.thumbs").find("ul").width(),a=i("div.gallery div.wrap div.thumbs").width(),l=i("div.wrap div.thumbs").find("ul").data("mgt");l||(l=parseInt(i("div.wrap div.thumbs").find("ul").css("marginLeft")));var v=i("div.gallery div.thumbs li").width()+10;v=d-a>Math.abs(l)?v>d-a?d-a:l-v:l,i("div.gallery div.wrap div.thumbs").find("ul").data("mgt",v).stop(!0).animate({marginLeft:v},200)}),i("body").on("click","div.gallery div.wrap div.thumbs a.prev",function(t){var d=(i("div.gallery div.wrap div.thumbs").find("ul").width(),i("div.wrap div.thumbs").find("ul").data("mgt"));d||(d=parseInt(i("div.wrap div.thumbs").find("ul").css("marginLeft")));var a=i("div.gallery div.thumbs li").width()+10;a=Math.abs(d)>=a?d+a:0,i("div.gallery div.wrap div.thumbs").find("ul").data("mgt",a).stop(!0).animate({marginLeft:a},200)}),i("body").on("click","div.gallery div.thumbs li",function(t){i(this).addClass("on").siblings("li").removeClass("on");var d=i(this).find("img").attr("src"),a=i('<img src="'+i(this).find("img").attr("src")+'">'),l=i("div.gallery div.wrap div.pic").width(),v=i("div.gallery div.wrap div.pic").height(),e=l/v,r=new Image;r.src=d,r.onload=function(){_width=r.width,_height=r.height;var t=_width/_height;if(e>t){var d=v/_height;a.css({width:"auto",height:"100%",opacity:0,top:0,left:(l-_width*d)/2+"px"})}else{var d=l/_width;a.css({width:"100%",height:"auto",opacity:0,top:(v-_height*d)/2+"px",left:0})}a.appendTo("div.gallery div.wrap div.pic").animate({opacity:1},200).siblings("img").animate({opacity:0},200,function(){i(this).remove()})},Math.abs(i(this).offset().left-5-i("div.gallery div.thumbs").offset().left)<5?i(this).prev().length>0&&i("div.gallery div.thumbs a.prev").trigger("click"):Math.abs(i(this).offset().left-(i("div.gallery div.thumbs").offset().left+i("div.gallery div.thumbs").width())+5+i(this).width())<5&&i(this).next().length>0&&i("div.gallery div.thumbs a.next").trigger("click")}),i("div.gallery div.pic a.prev").click(function(t){if(i("div.gallery div.thumbs li.on").prev().length>0)i("div.gallery div.thumbs li.on").prev().trigger("click");else{var d=i("div.gallery div.thumbs ul").width()-i("div.gallery div.thumbs").width();d>0&&i("div.gallery div.wrap div.thumbs ul").data("mgt",-d).stop(!0).animate({marginLeft:-d},200),i("div.gallery div.thumbs li").last().trigger("click")}}),i("div.gallery div.pic a.next").click(function(t){i("div.gallery div.thumbs li.on").next().length>0?i("div.gallery div.thumbs li.on").next().trigger("click"):(i("div.gallery div.wrap div.thumbs ul").data("mgt",0).stop(!0).animate({marginLeft:0},200),i("div.gallery div.thumbs li").first().trigger("click"))})});